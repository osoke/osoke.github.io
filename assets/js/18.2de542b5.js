(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{407:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Python 跨平台开发有两大框架: Kivy 和 BeeWare.\n这是一篇来自 "),a("a",{attrs:{href:"https://docs.beeware.org/en/latest/tutorial/tutorial-0.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("BeeWare 新手教程"),a("OutboundLink")],1),s._v("的学习记录, 便于以后查看, 官方教程更详细。")]),s._v(" "),a("h3",{attrs:{id:"beeware-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beeware-简介"}},[s._v("#")]),s._v(" BeeWare 简介")]),s._v(" "),a("p",[s._v("一个 Python 跨平台 GUI 框架, 可以做到一次编写, 全平台运行。")]),s._v(" "),a("h3",{attrs:{id:"安装前准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装前准备"}},[s._v("#")]),s._v(" 安装前准备")]),s._v(" "),a("ol",[a("li",[s._v("安装 "),a("a",{attrs:{href:"https://www.python.org/downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("Python 3.7+"),a("OutboundLink")],1),s._v(":")]),s._v(" "),a("li",[s._v("安装 "),a("a",{attrs:{href:"https://git-scm.com/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"设置虚拟环境-venv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置虚拟环境-venv"}},[s._v("#")]),s._v(" 设置虚拟环境 venv")]),s._v(" "),a("p",[s._v("打开 CMD 选择一个「存放项目」的位置\n运行:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("md beeware-tutorial\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" beeware-tutorial\npy -m venv beeware-venv\nbeeware-venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Scripts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("activate.bat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"_1-你的第一个应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-你的第一个应用"}},[s._v("#")]),s._v(" 1 - 你的第一个应用")]),s._v(" "),a("p",[s._v("安装 Briefcase 库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python -m pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" briefcase\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("用于打包 app")]),s._v(" "),a("li",[s._v("用于引导新项目")])]),s._v(" "),a("h3",{attrs:{id:"引导新项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引导新项目"}},[s._v("#")]),s._v(" 引导新项目")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("briefcase new")]),s._v(" 命令创建一个名为 "),a("code",[s._v("Hello World")]),s._v(" 的 App")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase new\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("接下来填写 App 的一些信息")]),s._v(" "),a("ul",[a("li",[s._v("Author: 你的姓名")]),s._v(" "),a("li",[s._v("Author's email: 你的 email\n除了以上两项, 其他项都可以直接 "),a("code",[s._v("Enter")]),s._v(" 键使用预设的值")])]),s._v(" "),a("p",[s._v("操作完成之后, 会生成一个项目框架")]),s._v(" "),a("h3",{attrs:{id:"项目结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[s._v("#")]),s._v(" 项目结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("beeware-tutorial/\n├─beeware-venv              python 虚拟环境\n│  └─...\n└─helloworld\n    │  .gitignore\n    │  LICENSE\n    │  pyproject.toml        描述如何打包 app 以进行分发\n    │  README.rst\n    │\n    └─src                    包含 app 的所有代码\n        └─helloworld\n            │  app.py        包含创建 app 窗口的逻辑\n            │  __init__.py   将目录标记为 - 可导入的 Python 模块\n            │  __main__.py   将模块标记为 - 可执行模块\n            │\n            └─resources\n                    helloworld.icns\n                    helloworld.ico     App 左上角图标\n                    helloworld.png\n                    __init__.py\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"在开发模式下运行应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在开发模式下运行应用"}},[s._v("#")]),s._v(" 在开发模式下运行应用")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" helloworld\nbriefcase dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("首次运行, 会自动安装"),a("code",[s._v("依赖项")])]),s._v(" "),a("h2",{attrs:{id:"_2-让它变得有趣"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-让它变得有趣"}},[s._v("#")]),s._v(" 2 - 让它变得有趣")]),s._v(" "),a("p",[a("code",[s._v("src/helloworld")]),s._v(" 中 "),a("code",[s._v("app.py")]),s._v(" 就是我们的 App 主程序：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" toga                              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 小部件工具包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Pack              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 样式相关 - 类")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pack "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" COLUMN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ROW  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 样式相关 - 常量")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HelloWorld")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主窗口")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("startup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动方法")]),s._v("\n        main_box "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个 Box 作为主框 (类似于 div)")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个窗口 | 标题 = formal_name = App 名称")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("formal_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" main_box  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 main_box 放入其中(空 Box)")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示窗口")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" HelloWorld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回 App 实例")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"添加一些我们自己的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加一些我们自己的内容"}},[s._v("#")]),s._v(" 添加一些我们自己的内容")]),s._v(" "),a("p",[s._v("修改 "),a("code",[s._v("src/helloworld/app.py")]),s._v(" 内部的 "),a("code",[s._v("HelloWorld")]),s._v(" 类\n注意: 别动 "),a("code",[s._v("HelloWorld")]),s._v(" 类以外的代码")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HelloWorld")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("startup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        main_box "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("direction"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("COLUMN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个主框")]),s._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 标签")]),s._v("\n        name_label "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your name: '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 左右 5px 填充")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文本输入框 | flex = 灵活 = 吸收其布局轴中的所有可用空间")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TextInput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("flex"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    \t\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个 Box 来保存 上面 2 个小部件")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ROW 内容水平添加 宽度尽可能窄")]),s._v("\n        name_box "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("direction"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ROW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        name_box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name_label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        name_box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一个 按钮")]),s._v("\n        button "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Say Hello!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            on_press"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("say_hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 回调")]),s._v("\n            style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 name_box 和 button 到 main_box (相当于 body)")]),s._v("\n        main_box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name_box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        main_box"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MainWindow 添加 main_box 并显示")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toga"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("formal_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" main_box\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按钮事件的处理程序")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 传入 widget")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("say_hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印 name_input 输入框的值")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello, "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br")])]),a("p",[a("strong",[s._v("布局说明")])]),s._v(" "),a("blockquote",[a("p",[s._v("direction=COLUMN")])]),s._v(" "),a("ul",[a("li",[s._v("y 轴方向, 随着添加的元素而扩展高度")]),s._v(" "),a("li",[s._v("x 轴方向, 占用所有空间")])]),s._v(" "),a("blockquote",[a("p",[s._v("direction=ROW")])]),s._v(" "),a("ul",[a("li",[s._v("与 COLUMN 相反")])]),s._v(" "),a("p",[s._v("更改完成后, 再次启动-查看 App 外观")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在文本框中输入字符，然后点击 Button，则「启动 App 的控制台中」会显示输出内容")]),s._v(" "),a("p",[s._v("至此, 已经可以「修改代码」并「让 App 在本地计算机上运行」")]),s._v(" "),a("h2",{attrs:{id:"_3-打包以进行分发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-打包以进行分发"}},[s._v("#")]),s._v(" 3 - 打包以进行分发")]),s._v(" "),a("h3",{attrs:{id:"创建-app-脚手架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-app-脚手架"}},[s._v("#")]),s._v(" 创建 App 脚手架")]),s._v(" "),a("p",[s._v("第一次打包 App ，需要创建一些"),a("code",[s._v("配置文件")]),s._v("和其他"),a("code",[s._v("脚手架")]),s._v("来支持打包过程。\n从 "),a("code",[s._v("C:\\beeware-tutorial\\helloworld")]),s._v(" 目录中，运行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase create\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("完成此操作后，在项目目录中, 生成与您的平台  ("),a("code",[s._v("macOS")]),s._v(", "),a("code",[s._v("linux")]),s._v(", or "),a("code",[s._v("windows")]),s._v(") 对应的目录，其中包含: 特定于平台的 App 打包配置文件。")]),s._v(" "),a("h3",{attrs:{id:"构建-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建-app"}},[s._v("#")]),s._v(" 构建 App")]),s._v(" "),a("p",[s._v("现在可以编译 App 为可执行二进制文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"运行应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行应用"}},[s._v("#")]),s._v(" 运行应用")]),s._v(" "),a("p",[s._v("运行本机 App")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase run\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"构建安装程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建安装程序"}},[s._v("#")]),s._v(" 构建安装程序")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase package\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("完成此步骤后，该 "),a("code",[s._v("windows")]),s._v(" 文件夹将包含一个名为 "),a("code",[s._v("Hello_World-0.0.1.msi")]),s._v(" 的安装文件。双击开始安装, 完成后，您的开始菜单中将有一个 "),a("code",[s._v("Hello World")]),s._v(" 条目。")]),s._v(" "),a("p",[s._v("至此, App 已经打包，可以在桌面平台上分发。")]),s._v(" "),a("h2",{attrs:{id:"_4-更新-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-更新-app"}},[s._v("#")]),s._v(" 4 - 更新 App")]),s._v(" "),a("p",[s._v("要发布新版本怎么办?")]),s._v(" "),a("p",[s._v("修改 "),a("code",[s._v("say_hello")]),s._v(" 回调, 使用「对话框」显示信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("def say_hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self, widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n    self.main_window.info_dialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开对话框")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello, {}'")]),s._v(".format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self.name_input.value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hi there!'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("以「开发模式」运行程序 "),a("code",[s._v("briefcase dev")]),s._v(" 发现修改已经生效")]),s._v(" "),a("p",[s._v("更新「安装程序代码」：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后就可以")]),s._v(" "),a("ul",[a("li",[s._v("重新编译 App "),a("code",[s._v("briefcase build")])]),s._v(" "),a("li",[s._v("运行更新的 App  "),a("code",[s._v("briefcase run")])]),s._v(" "),a("li",[s._v("并重新打包 App 以进行分发 "),a("code",[s._v("briefcase package")])])]),s._v(" "),a("h3",{attrs:{id:"一步更新和运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一步更新和运行"}},[s._v("#")]),s._v(" 一步更新和运行")]),s._v(" "),a("p",[s._v("修改代码后, 运行以下命令, 即可更新「安装程序代码」并运行")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase run -u\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("至此, 已经实现将 App 打包以在桌面平台上分发，并且能够更新 App 中的代码")]),s._v(" "),a("h2",{attrs:{id:"_5-移动端部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-移动端部署"}},[s._v("#")]),s._v(" 5 - 移动端部署")]),s._v(" "),a("p",[s._v("「部署为 Android App」的过程与「部署为桌面 App」 的过程非常相似。")]),s._v(" "),a("h3",{attrs:{id:"创建安卓应用并编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建安卓应用并编译"}},[s._v("#")]),s._v(" 创建安卓应用并编译")]),s._v(" "),a("p",[s._v("首先，运行 "),a("code",[s._v("create")]),s._v(" 命令。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase create android\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这将下载一个 Android 应用模板，并将你的 Python 代码添加到其中。\n中间需要下载很多东西, 耐心等待。\n下载完之后会提示: 接受 Google 的 Android SDK 许可证。一路 "),a("code",[s._v("y 回车")]),s._v(" 即可")]),s._v(" "),a("p",[s._v("完成此操作后，我们现在将在项目中拥有一个 "),a("code",[s._v("android")]),s._v(" 目录。其中包含一个名为 "),a("code",[s._v("Hello World")]),s._v(" 的 Android 项目。")]),s._v(" "),a("p",[s._v("编译为 Android "),a("code",[s._v("APK")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase build android\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("由于是第一次 build, 会下载很多 Android SDK 组件, 耐心等待")]),s._v(" "),a("h3",{attrs:{id:"在虚拟设备上运行-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在虚拟设备上运行-app"}},[s._v("#")]),s._v(" 在虚拟设备上运行 App")]),s._v(" "),a("p",[s._v("注意:")]),s._v(" "),a("ul",[a("li",[s._v("这一步需要从 google 下载内容, 需要开启代理。")]),s._v(" "),a("li",[s._v("若没有代理, 跳到下一节, 使用「物理机」运行 App.")])]),s._v(" "),a("p",[s._v("要运行 App ，请运行 "),a("code",[s._v("briefcase run android")]),s._v(", 之后会显示「设备列表」。\n默认是没有设备的, 需要创建新的 Android 模拟器。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("briefcase run android\n\nSelect device:\n\n  1) Create a new Android emulator  创建一个新的「安装模拟器」\n\n> 1          输入1回车\nbeePhone >   输入设备名称: 直接回车-使用默认值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("如果一切顺利, 将自动启动虚拟设备。\n然后将在设备上安装您的 App 并启动。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("Android 模拟器未启动！\nAndroid 模拟器在较旧的计算机上可能不可用。如果启动失败，请参阅 Android 开发人员文档"),a("a",{attrs:{href:"https://developer.android.com/studio/run/emulator#requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("的要求和建议"),a("OutboundLink")],1),s._v("部分。")])]),a("p",[s._v("如果「模拟器」启动了, 但 App 没启动，请在终端运行 "),a("code",[s._v("briefcase run")]),s._v(" 看是否有错误消息。")]),s._v(" "),a("p",[a("strong",[s._v("之后可以直接在虚拟设备上运行")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase run android -d @beePhone \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"在物理设备上运行应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在物理设备上运行应用"}},[s._v("#")]),s._v(" 在物理设备上运行应用")]),s._v(" "),a("p",[s._v("设置 Android 设备："),a("a",{attrs:{href:"https://developer.android.com/studio/debug/dev-options#enable",target:"_blank",rel:"noopener noreferrer"}},[s._v("请参阅 Android 开发人员文档"),a("OutboundLink")],1)]),s._v(" "),a("ol",[a("li",[s._v("启用开发人员选项")]),s._v(" "),a("li",[s._v("启用 USB 调试")])]),s._v(" "),a("p",[s._v("然后将 Android 手机或平板电脑 通过 USB 连接 PC")]),s._v(" "),a("p",[s._v("完成这些步骤后，运行 "),a("code",[s._v("briefcase run android")]),s._v(" 之后会显示「设备列表」。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("briefcase run android\n\nSelect device:\n\n  1) Pixel 3a (94ZZY0LNE8)   你的手机 (序列号)\n  2) @beePhone (emulator)\n  3) Create a new Android emulator\n\n> 1   选择手机并回车\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("之后可以直接在你的手机上运行")]),s._v(" (传入手机序列号)")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase run android -d 94ZZY0LNE8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_6-引入三方库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-引入三方库"}},[s._v("#")]),s._v(" 6 - 引入三方库")]),s._v(" "),a("h3",{attrs:{id:"访问-web-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问-web-接口"}},[s._v("#")]),s._v(" 访问 web 接口")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("app.py")]),s._v(" 的顶部导入 "),a("code",[s._v("httpx")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" httpx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后修改 "),a("code",[s._v("say_hello()")]),s._v(" 回调:")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("say_hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stranger'")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发出 GET 请求以获取「博客文章」数据")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" httpx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        response "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://jsonplaceholder.typicode.com/posts/42"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解析「博客文章」为 json")]),s._v("\n\n    self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info_dialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello, {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对话框显示「博客文章」正文")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("在开发虚拟环境中安装 "),a("code",[s._v("httpx")]),s._v(" 库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python -m pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpx\nbriefcase dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("启动 App 并按下按钮，等待 web API 响应, 然后您应该会看到一个对话框")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gcore.jsdelivr.net/gh/osoke/pic@main/img/20220723_1.png",alt:""}})]),s._v(" "),a("p",[s._v("至此, App 可以使用第三方库，在开发模式下运行！")]),s._v(" "),a("h3",{attrs:{id:"运行更新后的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行更新后的应用"}},[s._v("#")]),s._v(" 运行更新后的应用")]),s._v(" "),a("h4",{attrs:{id:"更新依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新依赖项"}},[s._v("#")]),s._v(" 更新依赖项")]),s._v(" "),a("p",[s._v("在项目的根目录中的 "),a("code",[s._v("pyproject.toml")]),s._v(" 文件, 包含「应用配置」的详细信息。")]),s._v(" "),a("p",[s._v("其中一个部分介绍了应用的设置：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[tool.briefcase.app.hello-world]\nformal_name = "Hello World"\ndescription = "A Tutorial app"\nicon = "src/hello_world/resources/hello-world"\nsources = [\'src/hello_world\']\nrequires = []   💡 App 的依赖项┃字符串列表┃指定要包含在应用中的库（以及可选的版本）\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("修改 "),a("code",[s._v("requires")]),s._v(" 设置:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('requires = [\n    "httpx",\n]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("requires 的其他形式")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"httpx==0.19.0"\n\n"httpx>=0.19"\n\n"git+https://github.com/encode/httpx"\n\n本地文件路径\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("移动设备上的 Python 限制（暂时！)")]),s._v(" "),a("ul",[a("li",[s._v("只能使用 「"),a("code",[s._v("纯 Python")]),s._v("」包，即「不包含二进制模块的包」。")]),s._v(" "),a("li",[s._v("这意味着 "),a("code",[s._v("numpy")]),s._v(" 、"),a("code",[s._v("scikit-learn")]),s._v("、"),a("code",[s._v("cryptography")]),s._v(" 等库不能在移动端使用。")])])]),a("p",[s._v("理论上可以构建一个「使用二进制模块」的移动端 Python App, 但这不是一个简单的任务。如果您希望将此特性添加到 BeeWare 中，请考虑"),a("a",{attrs:{href:"http://beeware.org/bee/join/",target:"_blank",rel:"noopener noreferrer"}},[s._v("通过成为会员来支持该项目"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("至此, 已经在 "),a("code",[s._v("pyproject.toml")]),s._v(" 更新了有关其他依赖项的信息，接下来再次打包我们的应用。然后再次更新应用 - 这次传入 "),a("code",[s._v("-d")]),s._v(" 标志, 更新打包应用中的依赖项：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("briefcase update -d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("更新后，你可以编译 ▶ 运行\n"),a("code",[s._v("briefcase build")]),s._v(" ▶ "),a("code",[s._v("briefcase run")])]),s._v(" "),a("h2",{attrs:{id:"_7-让界面响应变顺滑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-让界面响应变顺滑"}},[s._v("#")]),s._v(" 7 - 让界面响应变顺滑")]),s._v(" "),a("p",[s._v("当 App 发出 Web 请求时，它会等待 API 返回响应，在等待时，界面会无响应。")]),s._v(" "),a("h3",{attrs:{id:"图形用户界面-event-循环"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图形用户界面-event-循环"}},[s._v("#")]),s._v(" 图形用户界面 event 循环")]),s._v(" "),a("p",[s._v("当你操作 App 会产生 event, 然后 event 被放入队列中，App 会自动处理 event 队列。App 处理完所有可用 event 后，将重绘界面。")]),s._v(" "),a("p",[s._v("注意：当 App 处理 event 时, 它无法重绘界面, 如果 event 比较耗时, 此时界面就会「无响应、卡死」。")]),s._v(" "),a("p",[s._v("此问题「异步」可解。")]),s._v(" "),a("h3",{attrs:{id:"异步编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步编程"}},[s._v("#")]),s._v(" 异步编程")]),s._v(" "),a("p",[s._v("给函数添加 "),a("code",[s._v("async")]),s._v(" 关键字, 声明为「协程」, 表示可以异步调用。\n在耗时操作前添加 "),a("code",[s._v("await")]),s._v(" 关键字, 表示在等待「耗时操作」返回时, 可以将上下文切换为另一个「协程」")]),s._v(" "),a("h3",{attrs:{id:"给程序添加异步逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#给程序添加异步逻辑"}},[s._v("#")]),s._v(" 给程序添加异步逻辑")]),s._v(" "),a("p",[s._v("修改 "),a("code",[s._v("say_hello()")]),s._v(" 回调函数:")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("say_hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1-异步函数")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name_input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stranger'")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2-异步 上下文 ┃ 3-异步 Client")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" httpx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AsyncClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("   \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4-await")]),s._v("\n        response "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://jsonplaceholder.typicode.com/posts/42"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("main_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info_dialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello, {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("保存这些更改并使用 "),a("code",[s._v("briefcase dev")]),s._v(" 重新运行应用, 点击按钮, 发现 App 不再卡顿:")]),s._v(" "),a("ol",[a("li",[s._v("「按钮」返回到「未单击」状态，而不是卡在「单击」状态。")]),s._v(" "),a("li",[s._v("打开 App 菜单，该菜单将立即显示。")])]),s._v(" "),a("p",[s._v("至此, 我们有了一个流畅且响应迅速的 App")]),s._v(" "),a("p",[s._v("未完待续...")])])}),[],!1,null,null,null);a.default=e.exports}}]);